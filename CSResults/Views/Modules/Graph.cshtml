@model IEnumerable<CSResults.Models.ResultsViewModel>
@{
    ViewBag.Title = "Graph";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Graph</h2>

@{
    var yrs = new List<String>();
    var mean = new List<Double?>();

    foreach (var item in Model)
    {
        yrs.Add(item.result.year);
        mean.Add(item.result.mean);
    }
}

<div class="container">
    <canvas id="lineChart"></canvas>
</div>

<script>

    var ctx = document.getElementById('lineChart').getContext('2d');
    var chart = new Chart(ctx, {
    // The type of chart we want to create
    type: 'line',

    // The data for our dataset
    data: {
        labels: @Html.Raw(Json.Encode(yrs)),
        datasets: [{
            label: 'My First dataset',
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            data: @Html.Raw(Json.Encode(mean))
        }]
    },

    // Configuration options go here
    options: {}
});

</script>
